Триггер (trigger) — это хранимая процедура особого типа, которую пользователь не вызывает непосредственно, а исполнение которой обусловлено действием по модификации данных: добавлением, удалением или изменением данных в заданной таблице реляционной базы данных. Триггеры применяются для обеспечения целостности данных и реализации сложной бизнес-логики. Триггер запускается сервером автоматически и все производимые им модификации данных рассматриваются как выполняемые в транзакции, в которой выполнено действие, вызвавшее срабатывание триггера. Соответственно, в случае обнаружения ошибки или нарушения целостности данных может произойти откат этой транзакции4

HAVING используется для фильтрации результата GROUP BY по заданным логическим условиям.

При использовании GROUP BY все значения NULL считаются равными.


Побочные эффекты параллельного выполнения транзакций:

Потерянное обновление
При одновременном изменении одного блока данных разными транзакциями одно из изменений может теряться.

«Грязное» чтение
Грязное чтение возникает, когда считываются результаты другой транзакции, которая в последующем откатывается (rollback).

Неповторяющееся чтение
Возникает в ситуации, когда первая транзакция читает данные. Затем другая транзакция изменяет данные, считанные первой транзакцией и делает COMMIT. После чего первая транзакция снова пытается считать данные и получает совершенно другие значения. Подобная ситуация особенно неприемлема, когда данные считываются для частичного изменения и последующей фиксации в базе данных.

Фантомное чтение
Отличается от неповторяющегося чтения тем, что изменяются не сами считанные данные, а появляются новые «фантомные» записи, которые были добавлены другими транзакциями между командами чтения данных.

Уровни изоляции транзакций:

Read uncommited (чтение незафиксированных данных)
Самый низший уровень изоляции. Гарантируется только отсутствие потерянных обновлений.

Read commited (чтение зафиксированных данных)
Большинство промышленных СУБД (Oracle, PostgreSQL, Microsoft SQL Server) используют этот уровень по умолчанию. Защищает от грязного чтения, но транзакции видят зафиксированные (commit) изменения друг друга.

Repeatable read (повторяемость чтения)
При повторных чтениях считываются те же самые данные, что и при первом. Транзакция «не видит» изменения данных, которые уже были ей прочитаны. Однако транзакция видит данные, вставленные другими транзакциями, («фантомные») что может привести к считыванию больше числа строк, чем при первом считывании.

Serializable (упорядочиваемость)
Самый высокий уровень изоляции. Все транзакции полностью изолируются друг от друга. Транзакции выполняются так, будто параллельных транзакций не существует.


Нормальные формы:
1. Любое поле любой записи хранит только одно значение. (1NF)

2. Выполняется условие 1NF и любое неключевое поле полностью зависит от первичного ключа. (2NF)

3. Выполняется условие 2NF и нет неключевых полей зависящих от значения других неключевых полей.
.
